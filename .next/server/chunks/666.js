"use strict";exports.id=666,exports.ids=[666],exports.modules={1666:(e,t,a)=>{a.d(t,{Z:()=>ProductForm});var s=a(997),l=a(6689),r=a(1163),n=a(2167),o=a.n(n),i=a(8188);function ProductForm({_id:e,title:t,description:a,price:n,images:c,category:d,properties:p}){let[u,m]=(0,l.useState)(t||""),[h,x]=(0,l.useState)(a||""),[g,f]=(0,l.useState)(d||""),[b,j]=(0,l.useState)(n||""),[v,w]=(0,l.useState)(c||[]),[N,y]=(0,l.useState)(!1),[C,S]=(0,l.useState)(!1),[k,P]=(0,l.useState)([]),[A,D]=(0,l.useState)(p||[]);async function uploadImages(e){let t=e.target?.files;if(t?.length>0){S(!0);let e=new FormData;for(let a of t)e.append("file",a);try{let t=await o().post("/api/upload",e);w(e=>[...e,...t.data.links]),S(!1)}catch(e){console.error("Error uploading images:",e),S(!1)}}}async function saveProduct(t){t.preventDefault();let a={title:u,description:h,price:b,images:v,category:g,properties:A.map(e=>({name:e.name,values:e.values}))};try{e?await o().put("/api/products",{...a,_id:e}):await o().post("/api/products",a),y(!0)}catch(e){console.error("Error saving product:",e)}}return(0,r.useRouter)(),(0,l.useEffect)(()=>{o().get("/api/categories").then(e=>{P(e.data)})},[]),(0,s.jsxs)("form",{onSubmit:saveProduct,className:"p-4",children:[s.jsx("label",{className:"block",children:"Product Name"}),s.jsx("input",{type:"text",placeholder:"Product Name",value:u,onChange:e=>m(e.target.value),className:"border p-2 my-2 w-full"}),(0,s.jsxs)("select",{value:g,onChange:e=>f(e.target.value),className:"border p-2 my-2 w-full",children:[s.jsx("option",{value:"",children:"No category"}),k.length>0&&k.map(e=>s.jsx("option",{value:e._id,children:e.name},e.name))]}),(0,s.jsxs)("div",{className:"w-full mb-10",children:[s.jsx("label",{className:"block",children:s.jsx("h5",{children:"Properties"})}),s.jsx("div",{className:"flex flex-wrap gap-[2rem]",children:A.map((e,t)=>(0,s.jsxs)("div",{className:"flex flex-wrap gap-[2rem]",children:[s.jsx("input",{className:"border p-2 w-[15rem]",type:"text",placeholder:"Nume proprietate",value:e.name,onChange:e=>(function(e,t){let a=[...A];a[t].name=e.target.value,D(a)})(e,t)}),e.values?.map((e,a)=>s.jsx("input",{type:"text",placeholder:"Proprietate produs",value:e,onChange:e=>(function(e,t,a){let s=[...A];s[t].values[a]=e.target.value,D(s)})(e,t,a),className:"border px-5"},a)),(0,s.jsxs)("div",{className:"flex items-center  gap-5",children:[s.jsx("button",{className:"bg-[#000] text-white font-bold  w-[7rem] rounded  h-[3rem]",type:"button",onClick:()=>(function(e){let t=[...A];t[e].values.push(""),D(t)})(t),children:s.jsx("h5",{children:"Add Value"})}),s.jsx("button",{className:"bg-[#000] text-white font-bold  w-[7rem] rounded  h-[3rem]",type:"button",onClick:()=>(function(e){let t=[...A];t.splice(e,1),D(t)})(t),children:s.jsx("h5",{children:" Delete"})})]})]},t))}),s.jsx("button",{type:"button",onClick:function(){D([...A,{name:"",values:[""]}])},className:"bg-[#000] text-white font-bold  w-[15rem] rounded mt-10 h-[3rem]",children:"Add property"})]}),(0,s.jsxs)("label",{children:[" ",s.jsx("h5",{children:"Images"})]}),(0,s.jsxs)("div",{className:"mb-2 flex flex-wrap gap-1",children:[s.jsx(i.ReactSortable,{list:v,className:"flex flex-wrap gap-1",setList:e=>w(e),children:v?.length>0&&v.map((e,t)=>(0,s.jsxs)("div",{className:"h-[200px] w-[200px] bg-white p-4 shadow-sm rounded-sm border border-gray-200 flex flex-col items-center justify-center",children:[s.jsx("img",{src:e,alt:"",className:"rounded-lg w-[150px] h-[150px]"}),s.jsx("button",{className:"bg-red-500 text-white  px-2 py-1 rounded mt-1",onClick:()=>deleteImage(t),children:"Delete"})]},e))}),C&&s.jsx("div",{className:"h-24 flex items-center"}),(0,s.jsxs)("label",{className:"h-[200px] w-[200px] cursor-pointer text-center flex flex-col items-center justify-center text-sm gap-1 text-primary rounded-sm bg-white shadow-sm border border-primary",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})}),s.jsx("div",{children:"Add Image"}),s.jsx("input",{type:"file",onChange:uploadImages,className:"hidden"})]})]}),s.jsx("label",{children:s.jsx("h5",{children:"Description"})}),s.jsx("textarea",{className:"min-h-[30vh] border p-2 my-2 w-full",placeholder:"description",value:h,onChange:e=>x(e.target.value)}),s.jsx("h5",{children:"Extras"}),s.jsx("label",{children:s.jsx("h5",{children:"Price"})}),s.jsx("input",{type:"number",placeholder:"price",value:b,onChange:e=>j(e.target.value),className:"border p-2 my-2 w-full"}),s.jsx("button",{type:"submit",className:"bg-[#000] text-white font-bold py-2 px-4 rounded mt-4",children:"Save"})]})}}};