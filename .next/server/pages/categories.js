"use strict";(()=>{var e={};e.id=161,e.ids=[161],e.modules={9415:(e,t,a)=>{a.r(t),a.d(t,{config:()=>v,default:()=>x,getServerSideProps:()=>j,getStaticPaths:()=>b,getStaticProps:()=>h,reportWebVitals:()=>_,routeModule:()=>C,unstable_getServerProps:()=>N,unstable_getServerSideProps:()=>P,unstable_getStaticParams:()=>S,unstable_getStaticPaths:()=>y,unstable_getStaticProps:()=>f});var r={};a.r(r),a.d(r,{default:()=>categories});var s=a(7093),l=a(5244),i=a(1323),n=a(4003),c=a(9597),o=a(997),u=a(597),p=a(6689),d=a(2167),m=a.n(d),g=a(6979);let categories=function(){let[e,t]=(0,p.useState)(null),[a,r]=(0,p.useState)(""),[s,l]=(0,p.useState)(""),[i,n]=(0,p.useState)([]),[c,d]=(0,p.useState)([]),[x,h]=(0,p.useState)(!1);function fetchCategories(){h(!0),m().get("/api/categories").then(e=>{n(e.data),h(!1)})}async function saveCategory(i){i.preventDefault();let n={name:a,parentCategory:s,properties:c.map(e=>({name:e.name,values:e.values.split(",")}))};e?(n._id=e._id,await m().put("/api/categories",n),t(null)):await m().post("/api/categories",n),r(""),l(""),d([]),fetchCategories()}return(0,p.useEffect)(()=>{fetchCategories()},[]),(0,o.jsxs)(u.Z,{children:[o.jsx("h3",{className:"uppercase grey_text",children:"Categorii"}),o.jsx("label",{className:" uppercase grey_text mt-10 mb-10",children:e?`Editează categoria ${e.name}`:"Adaugă o categorie nouă"}),(0,o.jsxs)("form",{onSubmit:saveCategory,children:[(0,o.jsxs)("div",{className:"flex gap-1 mt-10 mb-10",children:[o.jsx("input",{className:"w-[20rem] light_grey_background py-3 px-3",type:"text",placeholder:"Nume categorie",onChange:e=>r(e.target.value),value:a}),(0,o.jsxs)("select",{className:"w-[20rem] light_grey_background py-3 px-3",onChange:e=>l(e.target.value),value:s,children:[o.jsx("option",{className:"w-[20rem] light_grey_background py-3 px-3",value:"",children:"Categorie principală"}),i.length>0&&i.map(e=>o.jsx("option",{className:"w-[20rem] light_grey_background py-3 px-3",value:e._id,children:e.name},e._id))]})]}),(0,o.jsxs)("div",{className:"mb-2",children:[o.jsx("label",{className:"block uppercase grey_text",children:"Proprietăți"}),o.jsx("button",{onClick:function(){d(e=>[...e,{name:"",values:""}])},type:"button",className:"btn-primary text-sm mb-2",children:"Adaugă o proprietate nouă"}),c.length>0&&c.map((e,t)=>(0,o.jsxs)("div",{className:"flex gap-1 mb-2",children:[o.jsx("input",{type:"text",value:e.name,className:"mb-0",onChange:e=>{var a;return a=e.target.value,void d(e=>{let r=[...e];return r[t].name=a,r})},placeholder:"property name (example: color)"}),o.jsx("input",{type:"text",className:"mb-0",onChange:e=>{var a;return a=e.target.value,void d(e=>{let r=[...e];return r[t].values=a,r})},value:e.values,placeholder:"values, comma separated"}),o.jsx("button",{onClick:()=>{d(e=>[...e].filter((e,a)=>a!==t))},type:"button",className:"btn-red",children:"Șterge"})]},t))]}),(0,o.jsxs)("div",{className:"flex gap-1",children:[e&&o.jsx("button",{type:"button",onClick:()=>{t(null),r(""),l(""),d([])},className:"btn-primary",children:"Anulează"}),o.jsx("button",{type:"submit",className:"btn-primary py-1 rounded-lg",children:"Salvează"})]})]}),!e&&(0,o.jsxs)("table",{className:"basic mt-4",children:[o.jsx("thead",{children:(0,o.jsxs)("tr",{children:[o.jsx("td",{children:"Nume categorie"}),o.jsx("td",{children:"Categorie principală"}),o.jsx("td",{})]})}),(0,o.jsxs)("tbody",{children:[x&&o.jsx("tr",{children:o.jsx("td",{colSpan:3,children:o.jsx("div",{className:"py-4",children:o.jsx(g.Z,{fullWidth:!0})})})}),i.length>0&&i.map(e=>(0,o.jsxs)("tr",{children:[o.jsx("td",{children:e.name}),o.jsx("td",{children:e?.parent?.name}),(0,o.jsxs)("td",{className:"flex flex-col gap-5",children:[o.jsx("button",{onClick:()=>{t(e),r(e.name),l(e.parent?._id),d(e.properties.map(({name:e,values:t})=>({name:e,values:t.join(",")})))},className:"btn-primary mr-1",children:"Editează"}),o.jsx("button",{onClick:()=>(function(e){let t=window.confirm(`Do you want to delete ${e.name}?`);if(t){let{_id:t}=e;m().delete("/api/categories?_id="+t).then(()=>{fetchCategories()}).catch(e=>{console.error("Error deleting category:",e)})}})(e),className:"btn-red",children:"Șterge"})]})]},e._id))]})]})]})},x=(0,i.l)(r,"default"),h=(0,i.l)(r,"getStaticProps"),b=(0,i.l)(r,"getStaticPaths"),j=(0,i.l)(r,"getServerSideProps"),v=(0,i.l)(r,"config"),_=(0,i.l)(r,"reportWebVitals"),f=(0,i.l)(r,"unstable_getStaticProps"),y=(0,i.l)(r,"unstable_getStaticPaths"),S=(0,i.l)(r,"unstable_getStaticParams"),N=(0,i.l)(r,"unstable_getServerProps"),P=(0,i.l)(r,"unstable_getServerSideProps"),C=new s.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/categories",pathname:"/categories",bundlePath:"",filename:""},components:{App:c.default,Document:n.default},userland:r})},6979:(e,t,a)=>{a.d(t,{Z:()=>Spinner});var r=a(997);let s=require("react-spinners");function Spinner({fullWidth:e}){return e?r.jsx("div",{className:"w-full flex justify-center",children:r.jsx(s.PulseLoader,{color:"#1E3A8A",speedMultiplier:2})}):r.jsx(s.PulseLoader,{color:"#1E3A8A",speedMultiplier:2})}},2167:e=>{e.exports=require("axios")},1649:e=>{e.exports=require("next-auth/react")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[859,450,201,263,163,493,597],()=>__webpack_exec__(9415));module.exports=a})();