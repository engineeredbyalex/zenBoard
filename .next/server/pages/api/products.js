"use strict";(()=>{var e={};e.id=221,e.ids=[221],e.modules={166:e=>{e.exports=require("@next-auth/mongodb-adapter")},8013:e=>{e.exports=require("mongodb")},1185:e=>{e.exports=require("mongoose")},3227:e=>{e.exports=require("next-auth")},3598:e=>{e.exports=require("next-auth/providers/google")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},4656:(e,r,t)=>{t.r(r),t.d(r,{config:()=>y,default:()=>g,routeModule:()=>q});var a={};t.r(a),t.d(a,{default:()=>handle});var o=t(1802),i=t(7153),n=t(6249),s=t(1185),d=t.n(s);let u=new s.Schema({name:{type:String,required:!0},values:[{type:String,required:!0}]}),p=new s.Schema({title:{type:String,required:!0},description:String,price:{type:Number,required:!0},images:[{type:String}],category:{type:d().Types.ObjectId,ref:"Category"},properties:[u]},{timestamps:!0}),l=s.models.Product||(0,s.model)("Product",p);var c=t(1022),m=t(9061);async function handle(e,r){try{console.log("Received request:",e.body),console.log("Properties:",e.body.properties)}catch(e){console.error("Error handling request:",e),r.status(500).json({error:"Internal Server Error"})}let{method:t}=e;try{if(await (0,c.I)(),await (0,m.isAdminRequest)(e,r),"GET"===t){if(e.query?.id){let t=await l.findOne({_id:e.query.id});r.json(t)}else{let e=await l.find();r.json(e)}}if("POST"===t){let{title:t,description:a,price:o,images:i,category:n,properties:s}=e.body,d=await l.create({title:t,description:a,price:o,images:i,category:n,properties:s.map(e=>({name:e.name,values:e.values}))});r.json(d)}if("PUT"===t){let{title:t,description:a,price:o,images:i,category:n,properties:s,_id:d}=e.body;await l.updateOne({_id:d},{title:t,description:a,price:o,images:i,category:n,properties:s.map(e=>({name:e.name,values:e.values}))}),r.json(!0)}"DELETE"===t&&e.query?.id&&(await l.deleteOne({_id:e.query?.id}),r.json(!0))}catch(e){console.error("Error processing request:",e),r.status(500).json({error:"Internal Server Error"})}}let g=(0,n.l)(a,"default"),y=(0,n.l)(a,"config"),q=new o.PagesAPIRouteModule({definition:{kind:i.x.PAGES_API,page:"/api/products",pathname:"/api/products",bundlePath:"",filename:""},userland:a})}};var r=require("../../webpack-api-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),t=r.X(0,[222,61],()=>__webpack_exec__(4656));module.exports=t})();